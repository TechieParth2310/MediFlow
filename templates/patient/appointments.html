{% extends "base.html" %}

{% block content %}

<div class="page-container">
    <h1>My Appointments ðŸ“‹</h1>

    <!-- Filter Bar -->
    <div class="filter-bar">
        <a href="{{ url_for('patient.appointments') }}"
            class="filter-btn {% if not status_filter %}active{% endif %}">All</a>
        <a href="{{ url_for('patient.appointments', status='scheduled') }}"
            class="filter-btn {% if status_filter == 'scheduled' %}active{% endif %}">Scheduled</a>
        <a href="{{ url_for('patient.appointments', status='confirmed') }}"
            class="filter-btn {% if status_filter == 'confirmed' %}active{% endif %}">Confirmed</a>
        <a href="{{ url_for('patient.appointments', status='completed') }}"
            class="filter-btn {% if status_filter == 'completed' %}active{% endif %}">Completed</a>
        <a href="{{ url_for('patient.appointments', status='cancelled') }}"
            class="filter-btn {% if status_filter == 'cancelled' %}active{% endif %}">Cancelled</a>
    </div>

    {% if appointments %}
    <div class="appointments-table">
        {% for appt in appointments %}
        <div class="appointment-row">
            <div class="appt-date-col">
                <div class="date">{{ appt.appointment_date.strftime('%b %d') }}</div>
                <div class="year">{{ appt.appointment_date.strftime('%Y') }}</div>
                <div class="time">{{ appt.appointment_time.strftime('%I:%M %p') }}</div>
            </div>
            <div class="appt-doctor-col">
                <h4>Dr. {{ appt.doctor_name }}</h4>
                <p>{{ appt.specialization }}</p>
            </div>
            <div class="appt-reason-col">
                <p>{{ appt.reason_for_visit or 'General checkup' }}</p>
            </div>
            <div class="appt-status-col">
                <span class="badge badge-{{ appt.status }}">{{ appt.status.title() }}</span>
            </div>
            <div class="appt-actions-col">
                <a href="{{ url_for('patient.appointment_detail', appointment_id=appt.id) }}"
                    class="btn btn-sm btn-primary">View Details</a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-icon">ðŸ“…</div>
        <h3>No Appointments Found</h3>
        <p>{% if status_filter %}No {{ status_filter }} appointments{% else %}You haven't booked any appointments yet{%
            endif %}</p>
        <a href="{{ url_for('patient.find_doctors') }}" class="btn btn-primary">Find Doctors</a>
    </div>
    {% endif %}
</div>

{% endblock %}